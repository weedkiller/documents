<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<link type="text/css" rel="stylesheet" href="bootstrap.min.css" />
<title>Development Guide</title>
<style type="text/css">
.auto-style2 {
	font-weight: normal;
}
.auto-style3 {
	font-weight: bold;
}
</style>
</head>

<body>

<h3>Introduction</h3>

<p>In <a href="Getting-Started-Core.html">Getting Started</a> document, a new sample project is created named 
"<strong>Acme.PhoneBookDemo</strong>". This document is a complete guide while developing your project. 
We definitely suggest to read this document before starting to the 
development. Since ASP.NET Zero is built on
<a href="https://aspnetboilerplate.com/" target="_blank">ASP.NET Boilerplate</a> 
application framework, this document highly refers it's 
<a href="https://aspnetboilerplate.com/Pages/Documents">documentation</a>.</p>
<p>Before reading this document, it's suggested to run the application and explore 
the user interface. This will help you to have a better understanding of concepts defined here.</p>
<h4>Pre Requirements</h4>
<p>Following tools are needed in order to use ASP.NET Zero Core solution:</p>
<ul>
	<li><a href="https://www.visualstudio.com">Visual Studio 2017 v15.3.5</a>+</li>
	<li>Visual Studio Extensions:
	<ul>
		<li><a href="https://marketplace.visualstudio.com/items?itemName=MadsKristensen.WebCompiler">Web Compiler</a></li>
		<li><a href="https://www.microsoft.com/en-us/download/details.aspx?id=48593">Typescript</a> 2.0+</li>
	</ul>
	</li>
	<li><a href="https://nodejs.org/en/download/" target="_blank">nodejs</a> 6.9+ with npm 3.10+</li>
	<li><a href="https://www.npmjs.com/package/gulp">gulp (must be installed globally)</a></li>
	<li><a href="https://yarnpkg.com/">yarn</a></li>	

	<li>SQL Server</li>
</ul>
<h4>Solution Structure (Layers)</h4>
<p>After you create and <a href="/Download">download</a> your project, you have a solution structure 
as shown below for <strong>*.Web.sln</strong>:</p>
<p>
There are two more solutions, <strong>*.Mobile.sln</strong> contains only Xamarin application development projects and <strong>*.All.sln</strong> 
contains both mobile and web development projects.
</p>
<p>
<img class="img-thumbnail" alt="ASP.NET Core solution" src="images/solution-overall-core-5.png" /></p>
<p>There are 12 projects in the solution:</p>
<ul>
	<li><strong>Core.Shared</strong> project contains const, enum and helper 
	classes used both in mobile &amp; web projects.</li>
	<li><strong>Core</strong> project contains domain layer classes (like
	<a href="https://aspnetboilerplate.com/Pages/Documents/Entities">entities</a> 
	and
	<a href="https://aspnetboilerplate.com/Pages/Documents/Domain-Services">
	domain services</a>).</li>
	<li><strong>Application.Shared</strong> project contains <a href="https://aspnetboilerplate.com/Pages/Documents/Application-Services#DocIApplicationServiceInterface">application 
	service interfaces</a> and
	<a href="https://aspnetboilerplate.com/Pages/Documents/Data-Transfer-Objects">
	DTO</a>s.</li>
	<li><strong>Application</strong> project contains application logic (like <a href="https://aspnetboilerplate.com/Pages/Documents/Application-Services">application 
	services</a>). </li>
	<li><strong>EntityFrameworkCore</strong> project contains your DbContext,
	<a href="https://aspnetboilerplate.com/Pages/Documents/Repositories">
	repository</a> implementations, database migrations and other 
	EntityFramework Core specific concepts.</li>
	<li><strong>Web.Mvc</strong> project contains the presentation/API layer 
	(Controllers, Views, javascripts, styles, images and so on) for backend and 
	frontend applications.</li>
	<li><strong>Web.Host</strong> project does not contain any view/css/js 
	files. Instead, it just serves the application as remote API. So, any device 
	can consume your application as API.</li>
	<li><strong>Web.Common</strong> project contains common classes used by Mvc 
	and Host projects.</li>
	<li><strong>Web.Public</strong> project is a seperated web application that 
	can be used to create a public web site or a landing page for your 
	application.</li>
	<li><strong>Migrator</strong> project is a console application that runs 
	database migrations.</li>
	<li><strong>ConsoleApiClient</strong> project is a simple console 
	application for performing API requests to the application authenticated via 
	IdentityServer4.</li>
	<li><strong>Tests </strong>project contains unit and integration tests.</li>
</ul>

<h4>Applications</h4>
<p>ASP.NET Zero solution contains <strong>four</strong> applications:</p>
<ul>
	<li><strong>Back End Application</strong> (Web.Mvc): This is the main application which is 
	entered by username and password.</li>
	<li><strong>Back End API</strong> (Web.Host): An application to only serve 
	the main application as API and does not provide UI.</li>
	<li><span class="auto-style3">Public Web Site</span> (Web.Public): This can be used to 
	create a public web site or a landing page for your application.</li>
	<li><strong>Migrator</strong>: Console application that runs database 
	migrations.</li>
</ul>
<h4>Multi tenancy</h4>
<p>Multi-tenancy is used to build <strong>SaaS</strong> (Software as a Service) 
applications easily. Wtih this technique, we can deploy <strong>single 
application</strong> to serve to <strong>
multiple customers</strong>. Each Tenant 
will have it's own <strong>roles</strong>, <strong>users</strong> and <strong>settings</strong>.</p>
<p>ASP.NET Zero's all code-base is developed to be <strong>multi-tenant</strong>. But, it 
<a href="Getting-Started#DocConfigureMultiTenancy"><strong>can be 
disabled</strong></a> with a single line of configuration if you are developing 
a 
<strong>single-tenant</strong> application. When you disable it, all multi-tenancy stuff will be 
hidden and not available. If multi-tenancy is disabled, there will be a single 
tenant named <strong>Default</strong>.</p>
<p>There are two types of perspective in multi-tenant applications:</p>
<ul>
	<li><strong>Host</strong>: Manages tenants and system.</li>
	<li><strong>Tenant</strong>: Uses the application features.</li>
</ul>
<p>Read
<a href="https://aspnetboilerplate.com/Pages/Documents/Multi-Tenancy" target="_blank">
multi tenant documentation</a> if you are building multi-tenant applications.</p>
<h4>Web Site Root URL</h4>

<p><strong>appsettings.json</strong> in Web.Mvc project contains a setting, named "<strong>WebSiteRootAddress</strong>", 
which stores root URL of the web application:</p>
<pre lang="xml">"WebSiteRootAddress": "http://localhost:62114/"</pre>
<p>It's used to calculate some URLs in the application. So, you need to change 
this on deployment. For multi-tenant applications, this URL can contain dynamic 
tenancy name. In that case, put {TENANCY_NAME} instead of tenancy name like:</p>
<pre lang="xml">"WebSiteRootAddress": "http://<strong>{TENANCY_NAME}</strong>.mydomain.com/"</pre>
<p>Thus, AspNet Zero can automatically detect current tenant from URLs. If you 
configure it as above, you should also redirect all subdomains to your 
application. To do that;</p>
<ol>
	<li>You should configure DNS to redirect all subdomains to a static IP 
	address. To declare 'all subdomains', you can use a wildcard e.g. <strong>*.mydomain.com</strong>.</li>
	<li>You should configure IIS to bind this static IP to your application.</li>
</ol>
<p>There may be other ways of doing it but this is the simplest.</p>
<p>Similar to "WebSiteRootAddress", "ServerRootAddress" setting is also exists in appsettings.json in 
.Web.Host project. In addition, .Web.Host application contains "<strong>ClientRootAddress</strong>" 
which is used if this API is used by the
<a href="Developing-Step-By-Step-Angular.html">Angular</a> UI. If you are not 
using Angular UI, you can ignore it. Finally, "<strong>CorsOrigins</strong>" 
setting is used to allow some domains for cross origin requests. This is also 
useful when you are hosting your Angular UI in a seperated server/domain.</p>

<h3>Account Controller</h3>
<p><strong>AccountController</strong> provides <strong>login</strong>, <strong>register</strong>,
<strong>forgot password </strong>and <strong>email activation</strong> pages.</p>
<h4>Layout</h4>
<p>Account management pages have a seperated <strong>_Layout</strong> view under 
<strong>Views/Account</strong> folder:</p>
<p>
<img class="img-thumbnail" alt="Account Views" height="214" src="images/account-views-core-v2.png" width="216" /></p>
<p>
Related <strong>Script </strong>and <strong>Style </strong>resources located under
<strong>view-resources/Views/Account</strong> folder:</p>
<p>
<img class="img-thumbnail" alt="Account view resources" height="347" src="images/account-views-core-resources.png" width="205" /></p>
<p>
As similar, all views of the application have corresponding style and script 
files under <strong>wwwroot/view-resources</strong> folder.</p>
<h4>Login</h4>
<p>Main view for AccountController is the Login page:</p>
<p>
<img class="img-thumbnail" alt="Login page" src="images/login-screen-3.png" /></p>
<p>The <strong>tenant selection</strong> section above login section is only 
shown in a 
<strong>multi-tenant</strong> application and if "subdomain tenancy name detection" is 
<strong>not possible </strong>(See host settings section). When we click Change 
link, tenant change dialog appears and we can change the tenant. There is a single tenant named <strong>Default</strong> 
in the initial database (See Entity framework section for initial seed 
data).&nbsp;Leave tenancy name input as blank to login as <strong>host</strong>.</p>
<p>We can use <strong>admin</strong> user name and <strong>123qwe</strong> 
password in first run the application. At first login, we should change admin 
password since 123qwe is not very secure:</p>
<p>
<img class="img-thumbnail" alt="Change password" src="images/account-change-password-1.png" /></p>
<p>
After changing password we are redirected to the <strong>backend application</strong>.</p>
<h4>Social Logins</h4>
<p>
ASP.NET Zero supports social media logins. To enable it, we should change 
the following settings in <b>a</b><span class="auto-style3">ppsettings.json</span> file.</p>
<pre lang="js">  &quot;Authentication&quot;: {
    &quot;Facebook&quot;: {
      &quot;IsEnabled&quot;: &quot;false&quot;,
      &quot;AppId&quot;: &quot;&quot;,
      &quot;AppSecret&quot;: &quot;&quot;
    },
    &quot;Google&quot;: {
      &quot;IsEnabled&quot;: &quot;false&quot;,
      &quot;ClientId&quot;: &quot;&quot;,
      &quot;ClientSecret&quot;: &quot;&quot;
    },
    &quot;Twitter&quot;: {
      &quot;IsEnabled&quot;: &quot;false&quot;,
      &quot;ConsumerKey&quot;: &quot;&quot;,
      &quot;ConsumerSecret&quot;: &quot;&quot;
    },
    &quot;Microsoft&quot;: {
      &quot;IsEnabled&quot;: &quot;false&quot;,
      &quot;ConsumerKey&quot;: &quot;&quot;,
      &quot;ConsumerSecret&quot;: &quot;&quot;
    }
  },</pre>
<p>
You can find many documents on the web to learn how to obtain authentication 
keys for social platforms. So, 
we will not go to details of creating apps on social medias. Once you get your 
keys, you can write them into appsettings.json. When you enable it, social media logos 
are automatically shown on the login page as shown below:</p>
<p>
<img class="img-thumbnail" alt="Social Login Icons" src="images/social-login-logos-3.png" /></p>
<h4>
OpenId Connect Login</h4>
<p>
In addition to social logins, ASP.NET Zero includes OpenId Connect Login 
integrated. It's configuration can be changed in <span class="auto-style3">
appsettings.json</span>:</p>
<pre lang="js">"OpenId": {
  "IsEnabled": "false",
  "Authority": "",
  "ClientId": "",
  "ClientSecret": ""
}</pre>
<h4>Two Factor Login</h4>
<p>ASP.NET Zero is ready to provide two factor login, but it's disabled as 
default. You can easily enable it in host settings page (in Security tab):</p>
<p>
<img class="img-thumbnail" alt="" src="images/lockout-two-factor-settings-1.png" /></p>
<p>
Note: In a multi-tenant application, two factor authentication is available to 
tenants only if it's enabled in the host settings. Also, email verification and 
SMS verification settings are only available in the host side. This is by 
design.</p>
<p>
When it's enabled, user is asked to select a verification provider after 
entering user name and password:</p>
<p>
<img class="img-thumbnail" alt="Send security code" src="images/send-security-code-1.png" /></p>
<p>
Then a <strong>confirmation code</strong> is sent to the selected provider and 
user enters the code in the next page:</p>
<p>
<img class="img-thumbnail" alt="Verify security code" src="images/verify-security-code-1.png" /></p>
<h5>
Email Verification</h5>
<p>
This is available if user has a confirmed email address. Since email sending is 
disabled in debug mode, you can see the code in logs. In release mode, email 
will be sent (You can change this and make emailing available in also debug. See 
sending emails section).</p>
<h5>
SMS Verification</h5>
<p>
This is available if user has a confirmed phone number. SMS sending is not 
implemented actually (because it requires an integration to an SMS vendor). 
Current implementation just writes security code to logs. You should complete
<strong>SmsSender</strong> class in the solution to make it 
usable. Otherwise, disable SMS verification in the settings.</p>
<h4>User Lockout</h4>
<p>As seen in the previous section, you can configure user lockout settings. 
Users are lockout when they enter wrong password for a specified count and 
duration.</p>
<h4>Register</h4>
<p>When we click the "<strong>Create Account</strong>" link in the login page, a 
registration form is shown:</p>
<p>
<img class="img-thumbnail" alt="Registration form" src="images/registration-form-small-1.png" /></p>
<p>A user can be register for a tenant, not for host if this is a multi-tenant 
application. If it's single-teant, there will be no tenancy name input here.</p>
<p><strong>Recaptcha</strong> (security question) is optional. It uses Google's recaptcha 
service. Recaptcha service works per domain. So, to make it properly work, you 
should create your own private and public keys for your domain on
<a href="https://www.google.com/recaptcha">https://www.google.com/recaptcha</a> 
and replace keys in <strong>appsettings.json</strong> file.</p>
<h4>Email Activation</h4>
<p>When a user registers as shown above, an email confirmation code is sent to 
his email address. If user did not receive this email for some reason, he can 
click Email activation and re-send the confirmation code.</p>
<p>
<img class="img-thumbnail" alt="Email activation screen" src="images/email-activation-1.png" /></p>
<p>Again, Tenancy name input is not shown for a single-tenant application or 
tenant name is known via subdomain (like tenancyname.mydomain.com).</p>
<h4>Forgot Password</h4>
<p>If a user forgots his password, he can click the "Forgot Password" link to 
get an email to reset the password.</p>
<p>
<img class="img-thumbnail" alt="Forgot password" src="images/forgot-password-1.png" /></p>
<h3>Back End Application</h3>
<p>This is the actual application which is entered by username and password. You 
will mostly work on this application to add your business requirements.</p>

<h4>Application Folders</h4>
<p>Backend application is built in a dedicated area, named "<strong>App</strong>" 
by default, but can be determined while you are <a href="Getting-Started.html">
creating the solution</a>. So, all controllers, views and models are located under <strong>
Areas/App</strong> folder. Also, related script and style files are located 
under <strong>wwwroot/view-resources/Areas/App</strong> folder, as shown below:</p>
<p>
<img class="img-thumbnail" alt="Application folders" height="381" src="images/app-folders-core.png" width="161" /></p>
<h4>Main Menu</h4>
<p>Application's main menu is defined in <strong>AppNavigationProvider</strong> 
class. See ABP's
<a href="https://aspnetboilerplate.com/Pages/Documents/Navigation">navigation 
documentation</a> to have a deep understanding on creating menus. When you add a 
new menu item, it's automatically rendered in the layout.</p>
<h4>Layout</h4>
<p>Layout of the application is located under <strong>Areas/App/Views/Layout</strong> 
folder. It uses <strong>Components</strong> for <strong>header</strong>, <strong>footer</strong> and <strong>
sidebar</strong>:</p>
<p>
<img class="img-thumbnail" alt="Application layout" src="images/app-layout-core-1.png" /></p>
<p>Main menu is rendered in
<strong>menu</strong> component. Layout also highly uses bundling &amp; 
minification (see the section below) system for script and style includes.</p>
<h4>Edition Management</h4>
<p><em>If you're not developing a multi-tenant application, you can skip this 
section.</em></p>
<p>Most <strong>SaaS</strong> (multi-tenant) applications have <strong>editions</strong> (packages) those have different 
<strong>features</strong>. Thus, they can provide different <strong>price and feature options</strong> to thier tenants (customers).&nbsp;<strong>Editions 
page</strong> (available in host login)<strong> </strong>is used to manage 
application's editions:</p>
<p>
<img  class="img-thumbnail" alt="Editions Page" src="images/editions-page-core-4.png" /></p>
<p>Editions are used to group feature values and assign to tenants. When we 
click Actions/Edit for an edition, we can see it&#39;s poperties:</p>
<p>
<img class="img-thumbnail" alt="Edit Edition" src="images/edition-edit-1.png" /></p>
<p>
An edition can be free or paid. If it&#39;s a paid edition then you should enter 
monthly and annual prices. You can allow tenants to use trial version of this 
edition for a specified days. Then you can determine an expire strategy: How 
many days to allow a tenant to use the application after subscription expires. 
And finally, you can deactivate tenant or assign to a free edition if they don&#39;t 
extend their subscription.</p>
<p>Features tab is used to determing features available for the edition:</p>
<p>
<img class="img-thumbnail" alt="Edit edition features" src="images/edition-feature-editing-core-1.png" /></p>
<p>See
<a href="https://aspnetboilerplate.com/Pages/Documents/Feature-Management">
feature management</a> and
<a href="https://aspnetboilerplate.com/Pages/Documents/Zero/Edition-Management">
edition management</a> documents for more information.</p>

<h4>Tenant Management</h4>

<div class="note note-info">
<p><em>If you're not developing a multi-tenant application, you can skip this 
section.</em></p>
</div>

<p>If this is a multi-tenant application and you logged in as a host user, then 
tenants page is shown:</p>
<p>
<img class="img-thumbnail"  alt="Tenant management page" src="images/tenant-management-core-3.png" /></p>
<p>A tenant is represented by <strong>Tenant</strong> class. Tenant class 
<a href="Extending-Existing-Entities.html">can be 
extended</a> by adding new properties. There is an only 
one tenant, named <strong>Default</strong> as initial.<strong> Tenancy Name</strong> (code name) is the <strong>unique</strong> name 
of a tenant. A&nbsp;tenant can be <strong>active</strong> or <strong>passive</strong>. 
If it's passive, no user of this tenant can login to the application.</p>
<p>When we 
click the "<strong>Create New Tenant</strong>" button, a dialog is shown:</p>
<p>
<img class="img-thumbnail" alt="Tenant Creation Modal" src="images/tenant-create-modal-1.png" /></p>
<p><strong>Tenancy name</strong> should be unique and not contain spaces or 
other special chars since it may be used as subdomain name (like 
tenancyname.mydomain.com. See the section below). <strong>Name</strong> can be anything. <strong>Admin email</strong> 
is used as email address of the admin user of new tenant. Admin user is 
automatically created with the tenant. We can set a random password for admin and send activation email. When user 
first logins, he/she should change the password. We can uncheck this to enter a known 
password.</p>
<p>When we create a new tenant, we should select/create a database to store new 
tenant's data. We can select '<strong>Use host database</strong>' to store 
tenant data in host database (can be used for single database approach) or we 
can specify a connection string to create/use a <strong>dedicated database
</strong>for new tenant. AspNet Zero supports <strong>hybrid </strong>approach. 
That means you can use host database for some tenants and create dedicated 
databases for some other tenants. Even you can <strong>group </strong>some 
tenants in a separated database.</p>
<p>Once you assign an edition to the tenant, you can select an expiration date 
(see edition management section to know what happens after subscription 
expiration).</p>
<p>All tenant actions are handled by <strong>TenantAppService</strong> 
class. Example (deleting a tenant):</p>
<pre lang="cs">[AbpAuthorize(AppPermissions.Pages_Tenants_Delete)]
public async Task DeleteTenant(EntityRequestInput input)
{
    var tenant = await TenantManager.GetByIdAsync(input.Id);
    CheckErrors(await TenantManager.DeleteAsync(tenant));
}</pre>
<p>TenantAppService mostly uses <strong>TenantManager</strong> domain service 
for tenant operations.</p>
<h5>Tenant Edition and Features</h5>
<p>An <strong>edition</strong> can be <strong>assigned</strong> to a tenant 
(while creating or editing). Tenant will inherit all features of the assigned 
edition. But we can also override features and values for a tenant. Click
<strong>actions/change features</strong> for a tenant to <strong>customize</strong> 
it's features:</p>
<p>
<img class="img-thumbnail" alt="Tenant features" src="images/tenant-features-core-1.png" /></p>
<h5>Tenant User Impersonation</h5>
<p>As a host user, we may want to perform operations in behalf of a tenant. In 
this case, we can click the "<strong>Login 
as this tenant</strong>" button in the actions. When we click it, we see <strong>a modal to select a user</strong> of the 
tenant. We can select any user and perform operations allowed that user. See
<strong>User Impersonation</strong> section in this document for more 
information.</p>
<h5>Using Tenancy Name As Subdomain</h5>
<p>A multi-tenant application generally uses subdomain to identify current tenant.
<strong>tenant1</strong>.mydomain.com, <strong>tenant2</strong>.mydomain.com and 
so on. ASP.NET Zero automatically identify and get tenant name from subdomain 
(See host settings section).</p>
<h4>Host Dashboard</h4>
<p>Host dashboard is used to show some statistics about tenants, editions and 
income:</p>
<p>
<img class="img-thumbnail" alt="Host dashboard" height="495" src="images/host-dashboard-1.png" width="1200" /></p>
<p>This is a fully implemented dashboard except two sample statistics (sample 
statistics 1 &amp; 2) those are placeholders for your own statistics.</p>
<h4>Organization Units</h4>
<p>Organization units (OU) are used to hierarchically group user and entities. 
Then you can get user or entities based on their OUs. When we click 
Administration/Organization units, we enter the related page:</p>
<p>
<img class="img-thumbnail" alt="Organization units page" src="images/organization-units-page-core-3.png" /></p>
<p>Here, we can manage OUs (create, edit, delele, move) and members 
(add/remove).</p>
<p><strong>OrganizationUnitManager</strong> is used to manage OUs, <strong>
UserManager</strong> is used to manage OU members in the code. <strong>
OrganizationUnitAppService</strong> performs the application logic.</p>
<p>In the left OU tree, we can <strong>right click</strong> to an OU (or left click to
<strong>arrow</strong> at the right) to open <strong>context menu</strong> for OU operations. When we try to 
<strong>add a 
member</strong>, a modal is shown to select the user:</p>
<p>
<img class="img-thumbnail" alt="Select a user dialog" src="images/select-user-lookup-core-3.png" /></p>
<p>This is actually a <strong>generic lookup modal</strong> and can be used to 
select any type of entity (see Areas/App/Views/Common/Modals/_LookupModal.cshtml 
and it's related script file). To select the users, we created <strong>FindUsers</strong> 
method in <strong>CommonLookupAppService</strong> then configured the modal to 
work with this method (see view-resources/Areas/App/Views/OrganizationUnits/index.js file for usage of 
lookupModal.open).</p>
<p>See
<a href="https://aspnetboilerplate.com/Pages/Documents/Zero/Organization-Units">
organization unit management document</a> for more information.</p>
<h4>Role Management</h4>

<p>When we click Administration/Roles menu, we enter to the role management page:</p>
<p>
<img class="img-thumbnail" alt="Role management page" src="images/role-management-core-3.png" /></p>
<p>Roles are used to <strong>group permissions</strong>. When a user has a 
role, then he/she will have all permissions of that role.</p>
<p>A role is represented by the <strong>Role</strong> class. Role class can be 
extended by adding new properties.</p>
<p><strong>RoleManager</strong> performs domain logic, <strong>RoleAppService</strong> 
performs application logic for roles.</p>
<p>Roles can be 
dynamic or static:</p>

<ul>
	<li><strong>Static role</strong>: A static role has a known <strong>name
	</strong>(like 'admin') and can not change this name (we can change <strong>
	display name</strong>). It's exists on the system startup and can not be 
	deleted. Thus, we can write our code based on a static role name.</li>
	<li><strong>Dynamic role</strong>: We can create a dynamic role 
	after deployment. Then we can grant permissions for that role, we can assign 
	the role to some users and we can delete it. We can not know names of 
	dynamic roles in development time.</li>
</ul>

<p>One or more roles can be set as <strong>default</strong>. Default roles are 
assigned to new added/registered users as default. This is not a development 
time property and can be set or changed after deployment.</p>

<p>In startup project, we have static <strong>admin </strong>role for host (for 
multi-tenant apps). Also, we have static <strong>admin </strong>and <strong>user </strong>
roles for tenants. <strong>Admin </strong>roles have all permissions granted by 
default. <strong>User </strong>role is the <strong>default</strong> role for new users and has no 
permission by default. These can be changed easily. See <strong>StaticRoleNames</strong> class for 
all static roles and <strong>AppRoleConfig</strong> for changing static roles.</p>
<h5>Role Permissions</h5>
<p>Since roles are used to group permissions, we can set permissions of a role 
while creating or editing as shown below:</p>
<p>
<img alt="Role Permissions" src="images/role-permissions-core-1.png" /></p>
<p>(not all permissions shown in the figure above)</p>
<p>Every tenant has it's own roles and any change in roles for a tenant does not effect other 
tenants. Also, host has also own isolated roles.</p>
<h4>User Management</h4>

<p>When we click Administration/Users menu, we enter to the user management page:</p>
<p>
<img class="img-thumbnail" alt="User management" src="images/user-management-core-3.png" /></p>

<p><strong>Users</strong> are people who can <strong>login </strong>to the application and 
perform some operations based on their <strong>permissions</strong>.</p>
<p><strong>User</strong> class represents a user. User class 
<a href="Extending-Existing-Entities.html">can be extended</a> by 
adding new properties.</p>
<p><strong>UserManager</strong> 
is used to perform domain logic, <strong>UserAppService</strong> is used to 
perform application logic for users.</p>

<p>A user can have zero or more <strong>roles</strong>. If a user has more than 
one role, he inherits union of 
permissions of all these roles. Also, we can set <strong>user-specific permission</strong>. 
A user specific permission setting overrides role settings for this permission. 
A screenshot of user permission dialog:</p>
<p>
<img class="img-thumbnail" alt="User Permissions" src="images/user-permissions-1.png" /></p>
<p>(not all permissions shown in the figure above)</p>
<p>A dialog is used to create/edit a user:</p>
<p>
<img class="img-thumbnail" alt="Editing User" src="images/edit-user-3.png" /></p>
<p>We can change user's <strong>password</strong>, make her <strong>
active/passive</strong> and so on... A user can have a <strong>profile picture</strong>. 
It can be changed by the user (See User Menu section). <strong>Admin</strong> 
user can not be deleted as a business rule. If you don't want to use admin, you 
can make it passive.</p>
<h5>User Impersonation</h5>
<p>As admin (or any allowed user), we may want to login as a user and perform 
operations in behalf of that user, without knowing his password. When we click "<strong>Login as this user</strong>" 
icon in the actions of a user, we are automatically redirected and logged in as this user. 
This is called as "<strong>user impersonation</strong>". When we impersonate a user, a "<strong>back to 
my account</strong>" option is added to the user profile menu:</p>
<p>
<img class="img-thumbnail" alt="Back to my account link" src="images/back-to-my-account-link-3.png" /></p>
<p>In an impersonated account, we can only perform operations allowed to that 
user. That means, everything <strong>exactly</strong> works as same as this user 
logged in himself. The only difference is shown in audit logs which indicates 
that operations are performed by somebody else. Notice that; Also a <strong>red 
'back' icon</strong> shown near to the user name to indicate that you are in an 
impersonated account.</p>
<p>Impersonation is done in <strong>AccountController</strong> of the Web 
project.</p>
<h4>Language Management</h4>
<p>Language management page is used to manage (add/edit/delete) <strong>application 
languages</strong> and change <strong>localized texts</strong>:</p>
<p>
<img class="img-thumbnail" alt="Language management" src="images/language-list-core-3.png" /></p>
<p>We can create new language, edit/delete an existing language and <strong>set a 
language as default</strong>. Note that; tenants can not edit/delete default 
languages, but host users can do.</p>
<p>When we click to <strong>Change text</strong> for any language, we are 
redirected to a new view to edit language texts:</p>
<p>
<img class="img-thumbnail" alt="Language texts" src="images/language-change-text-modal-core-3.png" /></p>
<p>We can select any language as a <strong>base</strong> (reference) and change 
<strong>target</strong> language's 
texts. Base language is just to help the translation progress. Since there maybe different
<a href="https://aspnetboilerplate.com/Pages/Documents/Localization#DocLocalizationSources">
localization sources</a>, we select the source to translate. When we click the 
edit icon, we can see the edit modal for the selected text:</p>
<p>
<img class="img-thumbnail" alt="Language text editing" src="images/language-change-text-modal-core-1.png" /></p>
<p><strong>Host</strong> users (if allowed) can edit languages and localized 
texts. These languages will be default for all tenants for a multi-tenant application.
<strong>Tenants</strong> inherit languages and localized texts and can <strong>
override</strong> localized texts or can add new languages.</p>
<p>Both pages use <strong>LanguageAppService</strong> class as application 
service. It has methods to manage languages and localized texts. <strong>
IApplicationLanguageManager</strong> and <strong>IApplicationLanguageTextManager</strong> 
interfaces are used to perform domain logic (as used by LanguageAppService).</p>
<p>See <a href="https://aspnetboilerplate.com/Pages/Documents/Zero/Language-Management">
language management</a> and
<a href="https://aspnetboilerplate.com/Pages/Documents/Localization" target="_blank">
localization</a> documents for more information.</p>
<h4>Audit Logs</h4>
<p>In audit logs page, we can see all user interactions with the application:</p>
<p>
<img class="img-thumbnail" alt="Audit logs" src="images/audit-logs-core-3.png" /></p>
<p>All application service methods and MVC controller actions are automatically logged and can be viewed 
here. See
<a href="https://aspnetboilerplate.com/Pages/Documents/Audit-Logging">audit 
logs documentation</a> to learn how to configure it. When we click the magnifier 
icon, we can see all details an audit log:</p>
<p>
<img class="img-thumbnail" alt="Audit Log" src="images/audit-logs-detail-1.png" /></p>
<p>
Audit log report is provided by <strong>AuditLogAppService</strong> class.</p>
<h4>
Subscription</h4>
<p>
Tenants can manage (show, extend or upgrade) their edition/plan subscriptions using this page:</p>
<p>
<img class="img-thumbnail" alt="Subscription" src="images/subscription-1.png" /></p>
<p>All payment records for extending/upgrading current licenses are kept in the system. These records can be seen on "Payment History" tab on subscription page.</p>
<p>
<img class="img-thumbnail" alt="Payment History" src="images/subscription-payment-history-core.png" />
</p>
<p>
Tenants can also create &amp; print invoices for these payments by clicking the "Show Invoice" button. System will automatically generate an invoice number and show the generated invoice.
In order to use this function, both Host &amp; Tenant must set invoice informations on host setting/tenant setting page.
</p>
<p>
<img class="img-thumbnail" alt="Tenant Invoice Settings" src="images/host-settings-invoice.png" />
</p>
<p>After all, invoices for payments related to subscription can be generated. You can see a sample invoice below:</p>
<p>
<img class="img-thumbnail" alt="Sample Invoice" src="images/sample-invoice-core.png" />
</p>
<h4>Visual Settings</h4>
<p>AspNet Zero's look of UI can be modified in visual settings page. This page is used to modify look of UI both for system and personal user accounts. If a user doesn't have permission to see this page, then user will see an item named "Visual Settings" in his personal menu.</p>
<p>
<img class="img-thumbnail" alt="User visual settings" src="images/user-menu-visual-settings-core.png" />
</p>
<p>Users who have permission to see this page will see the same item in the application menu.</p>
<p>In this page, users can change visual settings for Layout, Header, Menu and 
Footer of the application.</p>
<p>
<img class="img-thumbnail" alt="Visual settings" src="images/visual-settings-core.png" />
</p>
<h4>Host Settings</h4>
<p>Host settings page is used to configure some system settings:</p>
<p>
<img class="img-thumbnail" alt="General Host Settings" src="images/host-settings-general-6.png" /></p>
<p><strong>Timezone</strong> is an important setting in this page. AspNet 
Zero can work in multiple zones. Each user can see dates and times in their own time zone. Timezone setting in this 
page allows you to set default time zone for the application including all 
tenants and users. Tenants and users can change time zone in their own settings. 
Timezone setting is available only if you are using UTC clock.
<a href="https://aspnetboilerplate.com/Pages/Documents/Timing" target="_blank">
See documentation</a> to switch to UTC.</p>
<p>SAVE ALL button saves 
all settings in one click. HostSettingAppService is used to retrieve and save 
settings (See setting provider section for more information).</p>
<p><strong>Security</strong> tab in host settings page contains password complexity 
and other security settings. Host can define system wide security settings in this tab. Each tenant can override this setting in tenant settings page. <strong>PasswordComplexityChecker</strong> 
class is responsible for checking if a password satisfies the password complexity settings.</p>
<img class="img-thumbnail" alt="Tenant settings" src="images/host-settings-security-3.png" />
<h4>Tenant Settings</h4>
<p>In a multi-tenant application, tenant settings are shown as below:</p>
<p>
<img class="img-thumbnail" alt="Tenant settings" src="images/tenant-settings-core-1.png" /></p>
<p>If we disable multi-tenancy, some host settings are also shown in this page (since 
there is no host setting page). Tenants can also define password complexity settings for their users or they can use password complexity settings defined by host user.</p>
<p><strong>TenantSettingAppService</strong> is used to get/set tenant settings.</p>
<h5>Enabling LDAP (Active Directory) Authentication</h5>
<p>LDAP (Active Directory) Authentication is disabled by default. To make it 
work, we should disable multi-tenancy since LDAP auth is not used in a 
multi-tenant system normally. In CoreModule class in .Core project, we should 
enable the following line:</p>
<pre lang="cs">Configuration.Modules.ZeroLdap().Enable(typeof(AppLdapAuthenticationSource));</pre>
<p>Then, we can see <strong>LDAP settings</strong> section in settings page:</p>
<p>
<img class="img-thumbnail" alt="LDAP Settings" src="images/tenant-settings-ldap-1.png" /></p>
<p>We can check "<strong>Enable LDAP Authentication</strong>" to enable it. If 
the server works in domain and application runs with a domain user or local 
system, then generally even <strong>no need</strong> to set Domain name, user and password. You 
can logout and then login with your <strong>domain user name and password</strong>. 
If not, you should set these credentials.</p>
<div class="bs-callout bs-callout-warning">
	<p><strong>.Net Core Compability</strong></p>
<p>LDAP Authentication is not supportted by .net core yet. Thus, it's designed 
to be conditional. If you are using .Net Framework (4.6+) then it will be 
available, otherwise it will be disabled.</p>
</div>
<h4>Maintenance</h4>
<p>Maintenance page is available to <strong>host side</strong> for multi tenant 
applications (for single tenant applications it's shown in tenant side) and 
shown as below:</p>
<p>
<img class="img-thumbnail" alt="Maintenance cache" src="images/maintenance-cache-1.png" /></p>
<p>In the <strong>Caches</strong> tab, we can clear some or all caches. Clearing 
caches may be needed if you manually change database and want to refresh 
application cache. <strong>CachingAppService</strong> is used to clear caches in 
the server side.</p>
<p><strong>Website Logs</strong> tab is used to see and download 
logs: </p>
<p>
<img class="img-thumbnail" alt="Maintenance logs" src="images/maintenance-logs-1.png" /></p>
<p><strong>WebLogAppService</strong> is used to get logs from server.</p>

<h4>Tenant Dashboard</h4>
<p>ASP.NET Zero startup project also includes a <strong>sample</strong> 
dashboard. It's just for demo purposes, you can make it as a start point for 
your actual dashboard:</p>
<p>
<img class="img-thumbnail" alt="Tenant Dashboard" height="965" src="images/dashboardV3.png" width="1235" /></p>
<p>Client gets all data from server, server generates random data.</p>
<h4>Notifications</h4>
<p>Notification icon is located next to the language selection button. The number in the red circle shows unread notification count.</p>
<p>
<img alt="notifications" src="images/notifications-icon-1.png" class="img-thumbnail"/></p>
<p>User can see 3 recent notifications by clicking this icon. </p>
<p>
<img alt="notifications" src="images/recent-notifications-1.png" class="img-thumbnail"/></p>
<p>User can marks all notifications as read by clicking the "Set all as read" link or can mark a single notification by clicking the "set as read" link next to each notification.</p>
<p>Notifications are sent real-time using SignalR. In addition, a <strong>
desktop push notification</strong> is shown when a notification is received.</p>
<h5>Notification Settings</h5>
<p>"Settings" link opens notification settings dialog.</p>
<p>
<img alt="notifications" src="images/notification-settings-1.png" class="img-thumbnail"/></p>
<p>In this dialog there is a global setting for user to enable/disable receiving notifications. If this setting is enabled, then user can enable/disable each notification individually.</p>
<p>You can also define your custom notifications in <strong>AppNotificationProvider</strong> 
class. For example, new user registration notification is defined in the <strong>AppNotificationProvider</strong> as below.</p>
<pre lang="cs">context.Manager.Add(
     new NotificationDefinition(
        AppNotificationNames.NewUserRegistered,
        displayName: L("NewUserRegisteredNotificationDefinition"),
        permissionDependency: new SimplePermissionDependency(AppPermissions.Pages_Administration_Users)
    )
);
</pre>
<p>See <a href="https://aspnetboilerplate.com/Pages/Documents/Notification-System#notification-definitions">notification definitions</a> 
section for detailed information.</p>
<p><strong>AppNotifier</strong> class is used to publish notifications. 
<strong>NotificationAppService</strong> class is used to manage application logic for notifications. 
See <a href="https://aspnetboilerplate.com/Pages/Documents/Notification-System">notifications documentation</a> for detailed information.</p>
<h5>Notification List</h5>
<p>All notifications of user are listed in this page.</p>
<p>
<img class="img-thumbnail" alt="Notification list" src="images/notifications-list-core-3.png" /></p>
<div class="bs-callout bs-callout-warning">
	<p><strong>.Net Core Compability</strong></p>
<p>Since SignalR is not ready yet for .net core, real time notifications will 
not work if you select .net core as your base framework.</p>
</div>

<h4>Chat</h4>
<p>Chat icon is located next to user's profile image on top right corner of the page.  The number in the red circle shows total unread chat message count.</p>
<p><img class="img-thumbnail" alt="User menu" src="images/chat-icon-1.png" /></p>
<p>When user clicks this icon, chat panel appears on the right of page. This panel contains friends of user and list of blocked users.</p>
<img class="img-thumbnail" alt="User menu" src="images/chat-friends-1.png" />
<p>User can add new friends by writing the username into username textbox above friend list. If "Chat with other tenants" feature is enabled for tenant, users of other tenants can be added as a friend by writing [tenancy name]\[user name] (ex: Default\admin). If "Chat with host users" feature is enabled, host users can be added as friend by writing .\[user name] in the same textbox.</p>
<p>While online friends/users have a green circle on their profile image, offline friends/users 
have a gray circle.</p>
<p>User can pin or unpin the chat panel by clicking the pin icon on top right corner of the chat panel. Application tries to remember last state of chat panel and restores it when user login to application.</p>
<p>When a friend/user is selected, conversation panel is opened.</p>
<img class="img-thumbnail" alt="User menu" src="images/chat-conversation-1.png" />
<p>Chat system also allows sending images, files and link of current page to friends</p>
<p>
<img class="img-thumbnail" alt="Chat attachments" src="images/chat-attachments-core.png" />
</p>
<p>User can block or unblock friend/user in this area. There is a wrench icon right of the selected user's username. This icon opens an action menu and this menu contains block user or unblock user actions according to user's block status.</p>
<p>Chat messages are distrubited over <strong>ChatHub </strong>signalR hub class which uses <strong>ChatMessageManager</strong> domain class. </p>
<p><strong>ChatUserStateWatcher</strong> class is responsible for watching online/offline state changes of chat users. When a user becomes online or offline, this class catches the state change and notifies friends of related user.</p>
<p><strong>FriendshipAppService</strong> and <strong>FriendshipManager</strong> classes are responsible for managing friendship requests. Chat messages from blocked users are not delivered to target users.</p>
<p>Since chat is a real time operation, application caches friends of online users and unread message count from each friend. <strong>UserFriendsCache</strong> 
class manages these caching operations. </p>
<p><strong>UserFriendCacheSyncronizer</strong> class is responsible for keeping user friends cache up to date. In order to do that, it watches some events of Friendship and ChatMessage entities.</p>
<div class="bs-callout bs-callout-warning">
	<p><strong>.Net Core Compability</strong></p>
<p>Since SignalR is not ready yet for .net core, chat feature will 
not work if you select .net core as your base framework.</p>
</div>
<h5>Chat Features</h5>
<img class="img-thumbnail" alt="User menu" src="images/chat-features-1.png" />
<p>There are three chat features in the system. These are "Chat", "Chat with host", "Chat with other tenants". These features can be enabled/disabled 
per edition/tenant. By using these features host can enable/disable chat with other tenant's users or host users.</p>
<h4>User Menu</h4>
<p>A user can click his name at top right corner to open user menu:</p>
<p>
<img class="img-thumbnail" alt="User menu" src="images/user-menu-4.png" /></p>
<h5>Linked Accounts</h5>
<p>Linked accounts are used to link multiple accounts to each other. In this 
way, a user can easily navigate through his/her accounts using this feature.</p>
<p>User can link new accounts or delete already linked accounts by clicking the 
"Manage accounts" link.</p>
<p>
<img class="img-thumbnail" alt="User menu" src="images/linked-accounts-3.png" /></p>
<p>
In order to link a new account, user must enter login credentials of related account.</p>
<p>
<img class="img-thumbnail" alt="link new account" src="images/link-new-account-1.png"/></p>
<p><strong>UserLinkAppService</strong> class is used to manage application logic for account linking, 
<strong>UserLinkManager</strong> class is used to manage domain logic for account linking. </p>
<h5>Profile Settings</h5>
<p>My settings is used to change user profile settings:</p>
<p>
<img class="img-thumbnail" alt="User settings" src="images/user-settings-3.png" /></p>
<p>As shown here, <strong>admin</strong> user name can not be changed. It's 
considered a special user name since it's used in database migration seed. Other 
users can change their usernames. <strong>ProfileAppService</strong> is used to 
get/change settings.</p>
<h5>Login Attempts</h5>
<p>All login attempts (success of failed) are logged in the application. A user 
can see last login attempts for his/her account. <strong>UserLoginAppService</strong> 
is used to get login attempts from server.</p>
<p>
<img class="img-thumbnail" alt="Login attempts" src="images/login-attempts-1.png" /></p>
<h5>Change Picture</h5>
<p>A user can change own profile picture. <strong>ProfileController</strong> is 
used to upload and get user profile pictures.
Currently, jpg/jpeg, gif and png files are supported, you can extend it.</p>
<h5>Change Password</h5>
<p><strong>ProfileAppService</strong> is used to change password.</p>
<h5>Logout</h5>
<p><strong>AccountController</strong> is used to logout the user and redirect to 
Login page.</p>
<h3>Web.Host Application</h3>
<p>AspNet Zero solution contains an extra project, <strong>Web.Host</strong>, 
which just exposes all application functionality as <strong>remote API</strong>. 
Thus, you can consume your application as API from any device. Actually, Web.Mvc 
project also does it, provides API for all application functionality. The 
difference is that Web.Mvc project has also MVC Controllers, Views, scripts and 
so on. If you just want to deploy API without UI, you can use Web.Host project. 
Otherwise, you can even delete it. We are using Web.Host project to provide 
server side API to <a href="Development-Guide-Angular.html">Angular SPA</a>.</p>
<p>A few notes on Web.Host project:</p>
<ul>
	<li>It has only <strong>token based (JWT) authentication</strong> (plus 
	social login possibility). No form based authentication (because there is no 
	UI).</li>
	<li>It does <strong>not</strong> implement <strong>CSRF</strong> protection 
	since it's not a security concern in token based auth.</li>
	<li>&nbsp;It enables <strong>CORS</strong>. So, cross origin requests are 
	allowed. It only allows to <strong>http://localhost:4200</strong> by default 
	(see Startup class for the configuration).</li>
	<li>Configured and enabled <strong>Swagger UI</strong> by default.</li>
</ul>
<h3>Migrator Console Application</h3>
<p>AspNet Zero includes a tool, Migrator.exe, to easily migrate your databases. 
You can run this application to create/migrate host and tenant databases.</p>
<p>
<img class="img-thumbnail" alt="Database Migrator" height="230" src="images/database-migrator.png" width="659" /></p>
<p>This application gets host connection string from it's <strong>own 
appsettings.json 
file</strong>. It will be same as in the appsettings.json in .Web project at the beggining. Be sure that 
the connection string in config file is the database you want. After getting
<strong class="auto-style2">host </strong><strong>connection sring</strong>, it 
first creates the host database or apply migrations if it does already exists. 
Then it gets connection strings of tenant databases and runs migrations for 
those databases. It skips a tenant if it has not a dedicated database or it's 
database is already migrated for another tenant (for shared databases between 
multiple tenants).</p>
<p>You can use this tool on development or on product environment to migrate 
databases on deployment, instead of EntityFramework's own Migrate.exe (which 
requires some configuration and can only work for single database in one run).</p>

<h3>Public Web Site</h3>
<p>ASP.NET Zero contains a seperated application that can be a starting point 
for your public web site or a landing page for your application. Set <strong>
Web.Public</strong> as <strong>Startup Project</strong> and run the application:</p>
<p>
<img class="img-thumbnail" alt="Frontend home page" height="496" src="images/frontend-homepage.jpg" width="500" /></p>
<p>There are two pages here: <strong>Home Page</strong> and <strong>About</strong>. 
Contents of these pages are just placeholders and for demo purposes. You can 
completely remove content and build your page upon your needs. Also, you should 
change the <strong>logo</strong> with your Company's logo.</p>
<p>See
<a href="http://keenthemes.com/free-bootstrap-templates/multi-purpose-corporate-frontend-themefreebie-corporate-frontend-theme/" target="_blank">metronic front-end theme 
</a>for all possibilities and components to build a 
richer web site.</p>
<p>Menus 
are defined in <strong>FrontEndNavigationProvider</strong> class. When you add a new 
menu item here, it will be automatically shown in the menu. There is a <strong>Login</strong> 
link at the top right corner. This link takes us to the <strong>Login page
</strong>to enter to the <strong>backend</strong> application.&nbsp;</p>
<h4>Layout</h4>
<p>Layout of front-end pages are located under <strong>Views/Layout</strong> 
folder:</p>
<p>
<img class="img-thumbnail" alt="Frontend layout views" height="253" src="images/frontend-layout-views-core.png" width="193" /></p>
<p><strong>_Layout</strong> is the main layout file that includes scripts and 
styles. Language flags and the menu is rendered in <strong>Header component</strong> 
which is located under Shared/Components. _PreFooter is not used but you can add it to the _Layout if you want.</p>
<h4>New Tenant Registration</h4>
<p>When you click &quot;<strong>New Tenant</strong>&quot; link (at the top right 
area) you are 
redirected to the edition/plan selection page:</p>
<p>
<img class="img-thumbnail" alt="New Tenant Register Edition Selection" src="images/new-tenant-select-edition-1.png" /></p>
<p>Actually, this UI is located in the main application. When you pick an 
edition, you are redirected to the payment or register form depending on the 
button you clicked. Register form is shown as below:</p>
<p>
<img class="img-thumbnail" alt="Tenant register form" src="images/tenant-signup-v3.png" /></p>
<h4>Single Sign On</h4>
<p>Public web site has a login integration to the main application. When you 
click to login button (at the top right area) you are redirected to the main 
application. If you are already logged then you automatically login in the 
public web site too. If not, you can enter your username and password to login. 
Then you are redirected back to the public web site and your username is shown 
at the top right:</p>
<p>
<img class="img-thumbnail" alt="public web site login username" height="140" src="images/public-web-site-login-username.png" width="256" /></p>
<p>
To make this working, public web site and main application must know their URLs. 
There are two configuration for that:</p>
<ol>
	<li>&nbsp;In the <strong>appsettings.json</strong> of the <strong>Web.</strong><span class="auto-style3">Public</span> 
	project, set &quot;<strong>AdminWebSiteRootAddress</strong>&quot; to root URL of the 
	main application.</li>
	<li>In the <strong>appsettings.json</strong> of the <strong>Web.</strong><span class="auto-style3">Mvc</span> 
	project, set &quot;<strong>RedirectAllowedExternalWebSites</strong>&quot; to root URL 
	of the public web site.</li>
</ol>
<p>Both configuration is properly set for the development environment. You 
should change them when you publish your project.</p>
<h4>Setup Page</h4>
<p>
AspNet Zero application can be set-up using install page. This page is developed to create initial database, apply migrations and configure the application according to user's input on this page.
Setup page can be accessed via <strong>http://yourwebsite.com/Install</strong>.
</p>
<p>
<img class="img-thumbnail" alt="install page" src="images/install-page-core.png" width="1200" />
</p>
<h3>Infrastructure</h3>
<h4>Startup Class</h4>
<p>ASP.NET Core is initialized from the <strong>Startup</strong> class in the 
application. We configure all libraries (including ABP) in this class. We 
suggest you to start by checking this class. It is also integrated to <strong>
OWIN</strong>. So, you can add OWIN middlewares here.</p>
<h4>NPM &amp; Front End Dependencies</h4>
<p>ASP.NET Zero solution uses <a href="https://www.npmjs.com/" target="_blank">npm</a> 
package manager to obtain front end library dependencies (like bootstrap and 
jquery). So, you can easily add new packages or update existing packages on 
command line interface. You can see all installed npm 
packages in <strong>package.json</strong> of the .Web.Mvc project.</p>
<p>
<img class="img-thumbnail" alt="NPM dependencies" src="images/npm-dependencies-core.png" /></p>
<p>
NPM installs dependencies into node_modules folder which will be placed in the root folder of MVC project. But, in ASP.NET Core, it is suggested to place client side libraries under wwwroot folder.
Also, size of node_modules folder will be very big (more than 250 MB) and we don't want to send all of those files to production when we publish our application. In order to overcome this, we have used gulp to move necessary files from <strong>*.Web.Mvc/node_modules</strong> to <strong>*.Web.Mvc/wwwroot/lib</strong>.
There are two related files in *.Web.Mvc project, <strong>bundle.config.js</strong> and <strong>gulpfile.js</strong>. <strong>bundle.config.js</strong> contains necessary mapping definitions from node_modules to lib folder and it also contains bundling &amp; minification definitions.
You can see respectively in below screenshots mapping and nundling/minification configurations from bundle.config.js.</p>
<p>
<img class="img-thumbnail" alt="Gulp mappings" src="images/gulp-bundle-config-mappings.png" />
</p>
<p>
<img class="img-thumbnail" alt="Gulp bundling minification" src="images/gulp-bundle-config-bundles.png" />
</p>
<h4>Application Services as MVC API Controllers</h4>
<p>ASP.NET Zero project highly use AJAX to provide a better user 
experience. UI calls <strong>application service methods</strong> via AJAX. So, it's needed to create 
MVC API 
controllers as adapters (A Client calls MVC API Controller action via AJAX, then 
it calls application service method). ABP framework automatically creates
MVC API Controllers for all application services. So, 
no need to manually create MVC API Controllers for application services.See related
<a href="https://aspnetboilerplate.com/Pages/Documents/AspNet-Core#application-services-as-controllers" target="_blank">
documentation</a> for more. While ABP dynamically create Web API Controllers, we can also create regular 
MVC API Controllers as we always do.</p>
<h4>Localization</h4>
<p>ASP.NET Zero <strong>User Interface</strong> is completely
localized. AspNet Zero uses <strong>dynamic, database based, per-tenant</strong> 
localization (See the related section above).</p>
<p>XML files are used as base translation for desired languages:</p>
<p>
<img class="img-thumbnail" alt="Localization XML files" src="images/localization-files-core-1.png" /></p>
<p>PhoneBook will be your ProjectName. You can add more XML files by copying one 
XML file and translate to desired language. See
<a href="http://www.csharp-examples.net/culture-names/" target="_blank">valid 
culture codes</a>.</p>
<p>When you are adding a new localizable text, add it to the XML file of the 
default language then use in your application (Also, add translated values to 
corresponding XML files). No need to add it to database migration code since 
value in the XML file will be used as default.</p>
<p><strong>Application languages</strong> are defined in <strong>
DefaultLanguagesCreator</strong> class. This is used as a <strong>seed data</strong> 
in Entity Framework Migration. So, if you want to <strong>add a new default language</strong>, 
just add it into DefaultLanguagesCreator class. Also, you should add a 
corresponding XML file as described above as default translation.</p>
<p>See <a href="https://aspnetboilerplate.com/Pages/Documents/Localization">
localization</a> and
<a href="https://aspnetboilerplate.com/Pages/Documents/Zero/Language-Management">
language management</a> documentations for more information.</p>
<h4>EntityFrameworkCore Integration</h4>
<p>ASP.NET Zero template uses EntityFramework Core <strong>code-first</strong> and 
<strong>migrations</strong>. PhoneBook<strong>DbContext</strong> (YourProjectDbContext for your project) 
defines the DbContext class. <strong>Migrations</strong> folder contains EF migrations. </p>
<p>PhoneBook<strong>RepositoryBase</strong> class is the base class for your
custom repositories. See entity
<a href="https://aspnetboilerplate.com/Pages/Documents/EntityFramework-Integration">
framework integration</a> documentation for more.</p>
<h5>Database Migrations</h5>
<p>You can use Package Manager Console to add new migrations and update your 
database as you normally do. See EF Core's
<a href="https://docs.microsoft.com/en-us/ef/core/miscellaneous/cli/powershell" target="_blank">
documentation</a> for details.</p>
<h4>Exception Handling</h4>
<p>ASP.NET Zero uses ABP's
<a href="https://aspnetboilerplate.com/Pages/Documents/AspNet-Core#exception-filter" target="_blank">
exception handling</a> system. Thus, you don't need to handle &amp; care about 
exceptions in most time.</p>
<p>ASP.NET Zero solution adds <strong>exception handling middlewares</strong> in the
<strong>Startup</strong> 
class like that:</p>
<pre lang="cs">if (env.IsDevelopment())
{
    app.UseDeveloperExceptionPage();
}
else
{
    app.UseStatusCodePagesWithRedirects("~/Error?statusCode={0}");
    app.UseExceptionHandler("/Error");
}</pre>
<p>So, you get a nicely formatted exception page in development and a more user 
friendly error page in production. See <strong>ErrorController</strong> and it's 
related views (<strong>Views\Error</strong>) for details.</p>
<h4>User Secrets</h4>
<p>ASP.NET Core introduced
<a href="https://docs.microsoft.com/en-us/aspnet/core/security/app-secrets" target="_blank">user secrets</a> system to store <strong>sensitive data</strong> in development. ASP.NET Zero 
uses this system (it's configured properly for your solution). You may want to 
use a different connection string (or social media API keys) in development and 
do not want to add these secret data in your appsettings.json in the project 
(and do not want to commit these sensitive information to your source control 
system). Then use secret manager tool to store this sensitive information in 
your local computer and allow your application to read them from your local 
computer if available.</p>
<p>For example, you can use the following command, in Windows <strong>command 
prompt</strong> in the location of <strong>Core</strong> project, to change connection string for your 
local development environment:</p>
<pre>dotnet user-secrets set ConnectionStrings:Default "Server=1.2.3.4;Database=MyProjectDevDb;User=sa;Password=12345678"</pre>
<p>This user secret value overrides the value in the appsettings.json. See ASP.NET's
<a href="https://docs.microsoft.com/en-us/aspnet/core/security/app-secrets" target="_blank">own documentation</a> for details about user secrets.</p>
<h4>Authorization Provider</h4>
<p>Authorization system is based on permissions. <strong>AppPermissions </strong>
contains constants for permission names and <strong>
AppAuthorizationProvider</strong> class defines all permissions in the system. 
We should define a permission here before using it in application layer.</p>
<p>See <a href="https://aspnetboilerplate.com/Pages/Documents/Authorization">
authorization documentation</a> to learn how to configure permissions.</p>
<h4>Feature Provider</h4>
<p><strong>AppFeatureProvider</strong> class defines features of the 
application for multi-tenant applications. Feature names are defined in <strong>AppFeatures</strong> 
class as contants.</p>
<p>See
<a href="https://aspnetboilerplate.com/Pages/Documents/Feature-Management">feature management 
documentation</a> to learn how to define and use features.</p>
<h4>Setting Provider</h4>
<p>Every setting has a unique name. Setting names are defined in <strong>
AppSettings</strong> class as constants. All settings and their default values are defined in <strong>AppSettingProvider</strong> class.</p>
<p>See
<a href="https://aspnetboilerplate.com/Pages/Documents/Setting-Management">
setting documentation</a> to learn how to create and use settings.</p>
<h4>Navigation Provider</h4>
<p>Menus are automatically generated using definitions in <strong>
AppNavigationProvider</strong> class. We have two menus: <strong>Main</strong> 
(the main menu in the backend application) and <strong>FrontEnd</strong> (Main menu 
in front-end web site).</p>
<p>See <a href="https://aspnetboilerplate.com/Pages/Documents/Navigation">
navigation documentation</a> for more information.</p>
<h4>Caching And Redis Cache</h4>
<p>ASP.NET Zero uses <strong>in-memory</strong> caching but it's ready to use
<strong>Redis</strong> as cache server. If you want to enable it, 
just uncomment the following line in your <strong>WebCoreModule</strong> (in your 
.Web.Core project):</p>
<pre lang="cs">Configuration.Caching.UseRedis(...);</pre>
<p>Redis server should be up &amp; running to be able to use it. See
<a href="https://aspnetboilerplate.com/Pages/Documents/Caching">caching 
documentation</a> for more information.</p>
<h4>Background Jobs And HangFire</h4>
<p>ABP framework contains a <strong>background job system</strong> with a 
<strong>default</strong> background job 
manager. If you want to use <a href="http://hangfire.io/" target="_blank">Hangfire</a> as your background job manager, you can 
easily enable it;</p>
<ol>
	<li>Uncomment <strong>AddHangfire</strong> and <strong>UseHangfireDashboard</strong> 
	and <strong>UseHangfireServer</strong> lines in 
Startup.cs (of Web.Mvc or Web.Host depending on your case).</li>
	<li>Uncomment Configuration.BackgroundJobs.UseHangfire in 
	...WebCoreModule.cs class in your .Web.Core project.</li>
</ol>
<p><strong>Note</strong>: Hangfire creates it's <strong>own tables</strong> in 
the database on first run. See
<a href="https://aspnetboilerplate.com/Pages/Documents/Background-Jobs-And-Workers">
background job</a> and
<a href="https://aspnetboilerplate.com/Pages/Documents/Hangfire-Integration">
hangfire integration</a> documents for more information.</p>
<h4>SignalR Integration</h4>
<p>SignalR is properly configured and integrated to the startup template. Real 
time notification and chat systems use it. You can direcly use SignalR in your 
applications.</p>
<p>Notice that; As the time being, SignalR
<a href="https://github.com/aspnet/Home/wiki/Roadmap#12">has not been released</a> 
for ASP.NET Core yet. We integrated <strong>OWIN</strong> to ASP.NET Core 
pipeline in order to use SignalR in the application. See
<a href="https://aspnetboilerplate.com/Pages/Documents/SignalR-Integration">
SignalR integration</a> document for more information on 
SignalR.</p>
<div class="bs-callout bs-callout-warning">
	<p><strong>.Net Core Compability</strong></p>
<p>Since SignalR is not ready yet for .net core, SignalR integration is disabled if you select .net core as your base framework.</p>
</div>
<h4>Logging</h4>
<p>ASP.NET Zero uses <strong>Log4Net</strong> for logging 
as default. Configuration is defined in <strong>log4net.config</strong> file in 
the .Web project. It writes all logs to <strong>App_Data/Logs/Logs.txt</strong> folder of web site as default. When you publish your 
project, remember to configure <strong>write permission</strong> to Logs folder.</p>
<p>Check <a href="https://aspnetboilerplate.com/Pages/Documents/Logging">
logging documentation</a> to see how to inject ILogger and write logs.</p>
<h4>DTO Mappings</h4>
<p>ASP.NET Zero uses <a href="http://automapper.org/" target="_blank">AutoMapper</a> 
for DTO to Entity mappings (and other types of object-to-object mappings). We 
use <a href="https://www.nuget.org/packages/Abp.AutoMapper" target="_blank">Abp.AutoMapper</a> library that makes usage of AutoMapper simpler and 
declarative.</p>
<p>For instance, see the DTO class that is used to transfer a tenant editing information:</p>
<pre lang="cs"><strong>[AutoMap(typeof (Tenant))]
</strong>public class TenantEditDto : EntityDto
{
    [Required]
    [StringLength(Tenant.MaxTenancyNameLength)]
    public string TenancyName { get; set; }

    [Required]
    [StringLength(Tenant.MaxNameLength)]
    public string Name { get; set; }

    public bool IsActive { get; set; }
}</pre>
<p>Here, <strong>AutoMap</strong> attribute automatically creates mapping between 
<strong>TenantEditDto</strong> 
and <strong>Tenant</strong> classes. Then we can automatically convert a Tenant object to 
TenantEditDto (and vice verse) object as shown below:</p>
<pre lang="cs">[AbpAuthorize(AppPermissions.Pages_Tenants_Edit)]
public async Task&lt;TenantEditDto&gt; GetTenantForEdit(EntityRequestInput input)
{
    return <strong>ObjectMapper.Map</strong>&lt;TenantEditDto&gt;(await TenantManager.GetByIdAsync(input.Id));
}</pre>
<p><span class="auto-style3">ObjectMapper</span> (this property comes from base 
class, but can be injected as IObjectMapper when you need somewhere else) is 
used to perform mappings.</p>
<h5>Custom Object Mappings</h5>
<p>Attribute based mapping may not be sufficient in some cases. If you need to 
directly use Automapper API to configure your mappings, you should do it in
<strong>CustomDtoMapper</strong> class.</p>
<p>See <a href="https://aspnetboilerplate.com/Pages/Documents/Data-Transfer-Objects">
Data Transfer Objects documentation</a> for more information on DTOs.</p>
<h4>Sending Emails</h4>
<p>ASP.NET Zero sends emails to users in some cases (like forgot password and 
email confirmation). Email template is defined in <strong>Emailing/EmailTemplates</strong> 
folder of .Core project (<strong>default.html</strong>). You can change 
default email template by editing this file.</p>
<p> <strong>Email sending</strong> is disabled in DEBUG 
mode. Because, development environment may not be configured properly to send 
emails. You can enable it if you want. It's enabled in RELEASE mode. Check <em>
YourProjectName</em>CoreModule class's PreInitialize method to change it if you 
like.</p>
<div class="bs-callout bs-callout-warning">
	<p><strong>.Net Core Compability</strong></p>
<p>Since .net core does not support smpt client, AspNet Zero uses <a href="https://github.com/jstedfast/MailKit">MailKit</a> to send emails.</p>
</div>
<h4>BinaryObjectManager</h4>
<p>User <strong>profile pictures</strong> are stored in database, instead of 
file system. But it's not stored in Users table for performance reasons (Users 
are frequently retrieved from database, but profile pictures are rarely needed).</p>
<p>A general-purpose binary saving mechanism built in ASP.NET Zero. <strong>
BinaryObject</strong> entity can be used to save any type of binary objects 
(byte arrays). Since a profile picture can be converted to a byte array, user 
profile pictures are saved here.</p>
<p><strong>IBinaryObjectManager</strong> interface defines methods to save, get 
and delete binary objects. <strong>DbBinaryObjectManager</strong> implementes it 
to save binary object in database. For example, <strong>ProfileController</strong> 
uses IBinaryObjectManager to get current user's profile picture from database.</p>
<p>You can create a different implementation of <strong>IBinaryObjectManager</strong> 
interface to store files in another destination.</p>
<h4>Soft Deletes</h4>
<p>It's common to use the <strong>soft-delete</strong> pattern which is used to not delete an entity from database but only mark it as 'deleted'.
So, if an entity is soft-deleted, it should not be accidently retrieved into the application.&nbsp;ABP's
<strong>data filters</strong> make this automatically.</p>
<p>In ASP.NET Zero, most entities are soft-deleted. See ABP's
<a href="https://aspnetboilerplate.com/Pages/Documents/Data-Filters">data 
filter documentation</a> for more information about this topic.</p>
<h4>Bundling, Minifying and Compiling</h4>
<p>ASP.NET Zero uses
<a href="https://visualstudiogallery.msdn.microsoft.com/9ec27da7-e24b-4d56-8064-fd7e88ac1c40" target="_blank">
Bundler &amp; Minifier Visual Studio extension</a> for bundling &amp; minifying script and style files. 
It should be installed in your Visual Studio. <strong>bundleconfig.json</strong> 
file defines all bundling configuration.</p>
<p>ASP.NET Zero also uses
<a href="https://visualstudiogallery.msdn.microsoft.com/3b329021-cd7a-4a01-86fc-714c2d05bb6c" target="_blank">
Web Compiler Visual Studio extension</a> for compiling
<a href="http://lesscss.org/" target="_blank">LESS</a> files to CSS files. This 
extension also should be installed in your Visual Studio. <strong>
compilerconfig.json</strong> defines all compiling configuration.</p>
<p>See documentation of these extensions to learn to use them.</p>
<h4>Base Classes</h4>
<p>There are some useful base classes used in the application:</p>
<ul>
	<li>PhoneBook<strong>AppServiceBase</strong> can be used as a base class for 
	all <strong>application services</strong>.</li>
	<li>PhoneBook<strong>DomainServiceBase</strong> can be used as a base class 
	for <strong>domain services</strong>.</li>
	<li>PhoneBook<strong>ControllerBase</strong> 
	can be used as a base class for ASP.NET Core <strong>MVC Controllers</strong>.</li>
	<li>PhoneBook<strong>RazorPage</strong> 
	can be used as a base class for ASP.NET <strong>MVC Views</strong>. 
	Actually, all views are automatically inherit this since it's defined in 
	<strong>_ViewImports.cshtml</strong> files. You can add some common properties/methods here to use 
	in all views.</li>
	<li>PhoneBook<strong>ServiceBase</strong> can be used as a base class for 
	other service-like classes. UserEmailer class inherits it, for instance.</li>
	<li>PhoneBook<strong>RepositoryBase</strong> can be used as a base class for 
	<a href="https://aspnetboilerplate.com/Pages/Documents/EntityFramework-Integration#DocCustomRepositoryMethods">
	custom repository</a> implementations.</li>
</ul>
<p>It's strongly recommended to inherit one of these classes upon your needs 
since they really make Logging, Localization, Authorization... easier.</p>
<h4>CSRF/XSRF Protection</h4>
<p>ABP framework simplifies and automates CSRF protection as much as possible. AspNet Zero template comes with pre-configured and working out of the box. For more information please see ABP's 
<a href="https://aspnetboilerplate.com/Pages/Documents/XSRF-CSRF-Protection#aspnet-core">XSRF-CSRF-Protection documentation</a></p>
<h4>Versioning</h4>
<p><strong>AppVersionHelper</strong> class is used to define <strong>current version</strong> 
of the application in single place. Version and release date 
automatically shown bottom left corner in the backend application pages. This helps us 
to see running application version always.</p>
<h3>Token Based Authentication</h3>
<p>&nbsp;Any application can authenticate and 
use any functionality in the application as API. For instance, you can create a 
mobile application consumes the same API. In this section, we'll demonstrate 
usage of the API from
<a href="https://www.getpostman.com/docs/introduction" target="_blank">Postman</a> 
(a Google Chrome extension).</p>
<h4>Authentication</h4>
<p>We suggest you to disable two factor authentication for the user which will 
be used for remote authentication. Otherwise, two factor authentication flow 
should be implemented by the client. We assume that you have disabled two factor authentication for the <strong>admin</strong> 
user of <strong>default</strong> tenant since we will use it in this sample.</p>
<p>Following headers should be configured for all requests (Abp.TenantId is Id 
of the default tenant. This is not required for single tenant applications or if 
you want to work with host users):</p>
<p>
<img class="img-thumbnail" alt="Postman auth headers" height="112" src="images/postman-ng2-auth-headers.png" width="523" /></p>
<p>Then we can send username and password as a <strong>POST</strong> request to 
http://localhost:62114<strong>/api/TokenAuth/Authenticate</strong></p>
<p>
<img class="img-thumbnail" alt="Postman get user list" height="1023" src="images/postman-authenticate-core-2.png" width="919" /></p>
<p>
In the returning response, <strong>accessToken</strong> will be used to 
authorize for the API.</p>
<h4>Using API</h4>
<p>After authenticate and get the access token, we can use it to call any <strong>authorized</strong> 
actions. All <strong>services </strong>are available to be used remotely. For 
example, we can use the <strong>User service</strong> to get a <strong>list of 
users</strong>:</p>
<p>
<img class="img-thumbnail" alt="Postman authentication" height="1023" src="images/postman-getusers-core-2.png" width="919" /></p>
<p>We sent a GET request to http://localhost:62114<strong>/api/services/app/User/GetUsers</strong> 
and added Authorization to the header as "<strong>Bearer &lt;accessToken&gt;</strong>". 
Returning JSON contains the list of users.</p>
<h3>Swagger UI</h3>
<p><a href="http://swagger.io/swagger-ui/" target="_blank">Swagger UI</a> is 
<strong>integrated</strong> to ASP.NET Zero but <strong>disabled by default</strong>. Swagger UI configuration is located in
<b>S</b><span class="auto-style3">tartup</span> class in the <strong>.Web</strong> project. 
You can enable it by just uncommenting the related lines:</p>
<p>In Startup.<strong>ConfigureServices</strong> method, enable the following line:</p>
<pre lang="cs">services.AddSwaggerGen();</pre>
<p>And in Startup.Configure method, enable the following lines:</p>
<pre lang="cs">app.UseSwagger();
app.UseSwaggerUi();</pre>
<p>You can browse <strong>swagger ui</strong> with this URL: "/<strong>swagger/ui</strong>". </p>
<p>
<img alt="Swagger UI" height="753" src="images/swagger-ui-core.png" width="974" /></p>
<p>
Thus, anyone (or any application) can explore, test and use the API easily.</p>
<h3>Identity Server 4 Integration</h3>
<p><a href="http://identityserver.io/" target="_blank">IdentityServer4</a> is an 
OpenID Connect and OAuth 2.0 framework for ASP.NET Core. ASP.NET Zero is 
integrated to IdentityServer4. It&#39;s <strong>enabled by default</strong>.</p>
<h4>Configuration</h4>
<p>You can enable/disable or configure it from <strong>appsettings.json</strong> file</p>
<pre lang="js">"IdentityServer": {
  "IsEnabled": "true",
  "Clients": [
    {
      "ClientId": "client",
      "AllowedGrantTypes": [ "password" ],
      "ClientSecrets": [
        {
          "Value": "def2edf7-5d42-4edc-a84a-30136c340e13"
        }
      ],
      "AllowedScopes": [ "default-api" ]
    },
    {
      "ClientId": "demo",
      "ClientName": "MVC Client Demo",
      "AllowedGrantTypes": [ "hybrid", "client_credentials" ],
      "RequireConsent": "true",
      "ClientSecrets": [
        {
          "Value": "def2edf7-5d42-4edc-a84a-30136c340e13"
        }
      ],
      "RedirectUris": [ "http://openidclientdemo.com:8001/signin-oidc" ],
      "PostLogoutRedirectUris": [ "http://openidclientdemo.com:8001/signout-callback-oidc" ],
      "AllowedScopes": [ "openid", "profile", "email", "phone", "default-api" ],
      "AllowOfflineAccess": "true"
    }
  ]
}</pre>
<h4>Testing with Client</h4>
<p>ASP.NET Zero solution has a sample console application (ConsoleApiClient) 
that can connects to the application, authenticates through IdentityServer4 and 
calls an API.</p>
<h4>OpenId Connect Integration</h4>
<p>Once IdentityServer4 integration is enabled Web.Mvc application becomes an 
OpenId Connect server. That means another web application can use standard 
OpenId Connect protocol to authenticate users with your application and get 
permission to share their information (a.k.a. consent screen).</p>
<h4>More</h4>
<p>See <a href="https://identityserver4.readthedocs.io/en/release/" target="_blank">
IdentityServer4&#39;s own documentation</a> to understand and configure 
IdentityServer4.</p>
<h3>Unit Testing</h3>
<p>ASP.NET Zero startup project contains <strong>unit</strong> and <strong>integration</strong> tests. Tests are developed using following tools:</p>
<ul>
	<li><a href="http://xunit.github.io/" target="_blank">xUnit</a> as  as testing 
	framework.</li>
	<li>
	<a href="https://docs.microsoft.com/en-us/ef/core/miscellaneous/testing/sqlite" target="_blank">
	SQLite In-Memory</a> database for mocking entity framework and database.</li>
	<li><a href="http://www.nuget.org/packages/Abp.TestBase">Abp.TestBase</a> to 
	simplify integration testing for ABP based applications.</li>
	<li><a href="https://github.com/shouldly/shouldly" target="_blank">Shouldly</a> 
	as assertion library.</li>
</ul>
<p>Tests cover <strong>Domain </strong>(core) and <strong>Application</strong> 
layers of the project. Open Test Explorer (Test\Windows\Test Explorer in VS main 
menu) to run unit tests:</p>
<div class="bs-callout bs-callout-warning">
	Some unit tests (tenant creation, edition creation etc.) are only valid in multi tenancy concept. 
	You can change AbpZeroTemplateConsts.MultiTenancyEnabled to false in order 
	to make your application single tenant. Thus, multitenancy related tests 
	will be skipped.</div>

<p>
<img class="img-thumbnail" alt="Some unit tests" height="244" src="images/unit-tests.png" width="555" /></p>
<p>These unit tests will be a guide to understand the code. Also, they can be a 
model while writing your own unit tests for your application's functionalities.</p>
<p>All unit test classes (actually they are integration tests since they work 
integrated to ABP, EntityFramework, AutoMapper and other libraries used up to 
application layer) are derived from <strong>AppTestBase</strong>. It initializes ABP 
system, mocks database using Effort, creates initial test data and logins to the 
application for each tests. It also provides some useful common methods for all 
tests.</p>
<p>Here, a sample unit test in the application:</p>
<pre lang="cs">public class UserAppService_Delete_Tests : UserAppServiceTestBase
{
    [Fact]
    public async Task Should_Delete_User()
    {
        //Arrange
        CreateTestUsers();

        var user = await GetUserByUserNameOrNullAsync(&quot;artdent&quot;);
        user.ShouldNotBe(null);

        //Act
        await UserAppService.DeleteUser(new IdInput&lt;long&gt;(user.Id));

        //Assert
        user = await GetUserByUserNameOrNullAsync(&quot;artdent&quot;);
        user.IsDeleted.ShouldBe(true);
    }
}</pre>
<p>It creates some users to test and then verifies there is a user named 
"artdent". Then it calls <strong>DeleteUser</strong> method of the <strong>user 
application service</strong> (which is being tested). Finally, checks if user is 
deleted. Here, User is a Soft Delete entity, so it's <strong>IsDeleted</strong>  
property must be true if it's deleted.</p>

<p>You can read
<a href="http://www.codeproject.com/Articles/871786/Unit-testing-in-Csharp-using-xUnit-Entity-Framewor">
this article</a> to understand unit testing better.</p>
<h3>Publishing</h3>
<div class="bs-callout bs-callout-warning">
	<p><strong>Email Settings</strong></p>
<p>
If you don't configure email settings, some functions may not work (Like new tenant registration).</p>
</div>

<p>Publishing ASP.NET Zero is not different than any other solution. You can use 
Visual Studio as normally you do.</p>
<h4>Configuration</h4>
<p>ASP.NET Zero is properly configured for development. But when you want to 
publish your application to your <strong>test/production environment</strong>, 
you may need to change some configuration in order to make it properly work. 
Each section in this document describes it&#39;s own configuration, but we will 
provide a summary here.</p>
<p>Every application in the solution has it&#39;s own <strong>appsettings.json</strong> that should be 
independently configured.</p>
<h5>Web.Mvc Application</h5>
<ul>
	<li>&quot;<strong>ConnectionStrings:Default</strong>&quot;: Database connection 
	string.</li>
	<li>&quot;<strong>Abp.RedisCache</strong>&quot;: Redis cache settings if you are 
	enabled
	<a href="https://aspnetboilerplate.com/Pages/Documents/Caching#redis-cache-integration" target="_blank">
	Redis cache provider</a>.</li>
	<li>&quot;<strong>App:WebSiteRootAddress</strong>&quot;: Root URL of this application.</li>
	<li>&quot;<strong>App:RedirectAllowedExternalWebSites</strong>&quot;: A comma 
	seperated list of root URLs those are allowed to be redirected once user 
	logins. For security reasons, ASP.NET Zero only redirects to local URLs 
	except this list. If you will use the public web site, you should add it&#39;s 
	root URL to this list.</li>
	<li>&quot;<strong>Authentication</strong>&quot;: Authentication settings especially 
	for external login providers.</li>
	<li>&quot;<strong>Recaptcha</strong>&quot;: Recaptcha settings if you enabled it.</li>
	<li>&quot;<strong>IdentityServer</strong>&quot;: IdentityServer settings. It&#39;s 
	important to disable it if you are not using IdentityServer. If you are 
	using, ensure that you configured proper settings.</li>
	<li>&quot;<strong>Payment</strong>&quot;: Payment provider settings if you are 
	developing a paid SaaS product.</li>
</ul>
<p>Web.Public Application</p>
<ul>
	<li>&quot;<strong>ConnectionStrings:Default</strong>&quot;: Database connection 
	string.</li>
	<li>&quot;<strong>App:WebSiteRootAddress</strong>&quot;: Root URL of this 
	application (the public web site).</li>
	<li>&quot;<strong>App:AdminWebSiteRootAddress</strong>&quot;: Root URL of the 
	main (Web.Mvc) application.</li>
</ul>
<p>Migrator Application</p>
<ul>
	<li>&quot;<strong>ConnectionStrings:Default</strong>&quot;: Database connection 
	string.</li>
</ul>
<p>Web.Host Application</p>
<ul>
	<li>&quot;<strong>ConnectionStrings:Default</strong>&quot;: Database connection 
	string.</li>
	<li>&quot;<strong>Abp.RedisCache</strong>&quot;: Redis cache settings if you are 
	enabled
	<a href="https://aspnetboilerplate.com/Pages/Documents/Caching#redis-cache-integration" target="_blank">
	Redis cache provider</a>.</li>
	<li>&quot;<strong>App:</strong><span class="auto-style3">ServerRootAddress</span>&quot;: 
	Root URL of this application.</li>
	<li>&quot;<strong>App:ClientRootAddress</strong>&quot;: Root URL of the angular 
	application (if you are using Angular as UI).</li>
	<li>&quot;<strong>App:CorsOrigins</strong>&quot;: Allowed origins for cross 
	origin requests (splitted by comma).</li>
	<li>&quot;<strong>Authentication</strong>&quot;: Authentication settings especially 
	for external login providers.</li>
	<li>&quot;<strong>IdentityServer</strong>&quot;: IdentityServer settings. It&#39;s 
	important to disable it if you are not using IdentityServer. If you are 
	using, ensure that you configured proper settings.</li>
	<li>&quot;<strong>Payment</strong>&quot;: Payment provider settings if you are 
	developing a paid SaaS product.</li>
</ul>
<h4>Publishing to IIS</h4>
<p>If you want to publish your solution to IIS, then check Microsoft's
<a href="https://docs.microsoft.com/en-us/aspnet/core/publishing/iis" target="_blank">
documentation</a>.</p>
<h4>Publishing to Docker Containers</h4>
<p>ASP.NET Zero solution has a <strong>build folder</strong> which contains a 
Powershell script to <strong>build &amp; publish</strong> your solution to the
<strong>output</strong> folder. It also contains <strong>Docker</strong> files to run 
your application inside Docker containers. These files are very simple, you can 
improve them based on your needs.</p>

<h3>Used Library &amp; Frameworks</h3>
<p>Many open source frameworks and libraries are used to build ASP.NET Zero 
project. Here, a list of all libraries.</p>
<ul>
	<li>Server side<ul>
		<li><a target="_blank" href="https://aspnetboilerplate.com">ASP.NET Boilerplate Framework &amp; Module-Zero</a></li>
		<li>
		<a href="https://docs.microsoft.com/en-us/aspnet/core/" target="_blank">ASP.NET Core</a></li>
		<li>
		<a href="https://docs.microsoft.com/en-us/aspnet/core/security/authentication/identity" target="_blank">ASP.NET Identity 
		Core (and social login extensions)</a></li>
		<li>
		<a href="http://www.asp.net/signalr" target="_blank">SignalR</a></li>
		<li>
		<a href="https://docs.microsoft.com/en-us/ef/core/index" target="_blank">
		EntityFramework Core</a></li>
		<li><a target="_blank" href="http://www.castleproject.org/projects/windsor/">Castle Windsor</a></li>
		<li><a target="_blank" href="http://automapper.org/">AutoMapper</a></li>
		<li><a href="http://identityserver.io/" target="_blank">IdentityServer4</a></li>
		<li><a href="http://hangfire.io/" target="_blank">HangFire</a></li>
		<li><a target="_blank" href="https://logging.apache.org/log4net/">Log4Net</a></li>
		<li><a href="https://github.com/PaulMiami/reCAPTCHA" target="_blank">PaulMiami reCAPTCHA</a></li>
		<li><a href="https://xunit.github.io/" target="_blank">xUnit</a></li>
		<li><a href="https://github.com/domaindrivendev/Ahoy" target="_blank">
		Swashbuckle</a></li>
		<li>
		<a href="https://github.com/StackExchange/StackExchange.Redis" target="_blank">
		StackExchange.Redis</a></li>
		<li>
		<a href="https://github.com/StefH/System.Linq.Dynamic.Core" target="_blank">
		System.Linq.Dynamic.Core</a></li>
		<li><a href="http://epplus.codeplex.com/" target="_blank">EPPlus</a></li>
	</ul>
	</li>
	<li>Client side<ul>
		<li><a href="http://keenthemes.com/metronic-theme/" target="_blank">Metronic Theme</a></li>
		<li><a target="_blank" href="http://getbootstrap.com/">Twitter Bootstrap</a></li>
		<li><a target="_blank" href="https://github.com/CWSpear/bootstrap-hover-dropdown">Bootstrap Hover Dropdown</a></li>
		<li><a target="_blank" href="https://github.com/dangrossman/bootstrap-daterangepicker">Bootstrap Date Range Picker</a></li>
		<li><a target="_blank" href="http://www.bootstrap-switch.org/">Bootstrap Switch</a></li>
		<li>
		<a href="http://silviomoreto.github.io/bootstrap-select" target="_blank">Bootstrap 
		Select</a></li>
		<li><a target="_blank" href="http://jquery.com/">jQuery</a></li>
		<li><a target="_blank" href="http://jqueryui.com/">jQuery UI</a></li>
		<li><a target="_blank" href="http://malsup.com/jquery/block/">jQuery BlockUI</a></li>
		<li><a target="_blank" href="http://rocha.la/jQuery-slimScroll">jQuery Slimscroll</a></li>
		<li><a target="_blank" href="http://omnipotent.net/jquery.sparkline/">jQuery Sparkline</a></li>
		<li><a target="_blank" href="https://github.com/pixelmatrix/uniform">jQuery Uniform</a></li>
		<li><a target="_blank" href="http://jqueryvalidation.org/">jQuery Validation</a></li>
		<li><a target="_blank" href="http://jtable.org/">jQuery jTable</a></li>
		<li><a target="_blank" href="http://malsup.com/jquery/form/">jQuery Ajax Forms</a></li>
		<li><a href="https://github.com/rmm5t/jquery-timeago" target="_blank">
		jQuery Timeago</a></li>
		<li>
		<a href="https://github.com/douglascrockford/JSON-js" target="_blank">
		Json2</a></li>
		<li><a href="https://github.com/tapmodo/Jcrop" target="_blank">Jcrop</a></li>
		<li>
		<a href="https://github.com/localForage/localForage" target="_blank">
		LocalForage</a></li>
		<li><a href="https://github.com/js-cookie/js-cookie" target="_blank">Js 
		Cookie</a></li>
		<li><a target="_blank" href="http://momentjs.com/">Moment.js</a></li>
		<li><a href="http://momentjs.com/timezone/" target="_blank">Moment.js 
		Timezone</a></li>
		<li><a href="https://github.com/janl/mustache.js" target="_blank">
		Mustache.js</a></li>
		<li><a target="_blank" href="http://underscorejs.org/">Underscore.js</a></li>
		<li><a target="_blank" href="https://www.jstree.com/">JsTree</a></li>
		<li><a target="_blank" href="http://morrisjs.github.io/morris.js/">Morris</a></li>
		<li><a target="_blank" href="https://github.com/scottjehl/Respond">Respondjs</a></li>
		<li><a target="_blank" href="http://fontawesome.io/">Font-Awesome</a></li>
		<li><a href="http://www.famfamfam.com/lab/icons/flags/" target="_blank">
		Famfamfam flags</a></li>
		<li><a target="_blank" href="http://thesabbir.github.io/simple-line-icons/">Simple Line Icons</a></li>
		<li><a target="_blank" href="http://fgnass.github.io/spin.js/">SpinJs</a></li>
		<li><a target="_blank" href="http://t4t5.github.io/sweetalert/">SweetAlert</a></li>
		<li><a target="_blank" href="http://codeseven.github.io/toastr/">Toastr</a></li>
	</ul>
	</li>
</ul>

</body>

</html>
